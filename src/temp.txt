import PepoleItem from "./pepoleItem";
import { doApiGet } from "../services/services/apiService";

class Main extends Component
{
    state = { pepole_ar: []}
    componentDidMount()
    {
        // this.props.updateText("People List");
        let url = "https://randomuser.me/api/?results=10&seed=monkeys";
        doApiGet(url)
        .then(data =>
        {
            console.log(data.results);
            this.setState({ pepole_ar: data.results})
        })
    }



//     componentDidUpdate(_prevProps, prevState) {



//         if (_prevProps.searchChage != this.props.searchChage) {
//             console.log("did update", this.props.searchChage);

//             let val = this.props.searchChage;
//             let arfilter = this.state.ar.filter(item => {

//                 if (item.name.first.toLowerCase().indexOf(val.toLowerCase()) > -1 || item.name.last.toLowerCase().indexOf(val.toLowerCase()) > -1) {
//                     return true;
//                 } else {
//                     return false;
//                 }
//             })

//             this.setState({pepole_ar:arfilter})
//             console.log("why is you don't work", val);

//         }

//     }

  

render() {
    return (
        <div className="container-fluid">
            <div className="container">
                <div className="row">
                    {(this.state.pepole_ar == 0) ? "No Results was found, No more salad for you Mr. Anderson":
                        
                    this.state.pepole_ar.map(item =>
                    {
                        return(
                                <PepoleItem key={item.name.first} item={item} />
                        )
                    })
                    }
                </div>
            </div>
        </div>
        )
    }
}

export default Main;